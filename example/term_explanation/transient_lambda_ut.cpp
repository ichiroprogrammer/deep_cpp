#include "gtest_wrapper.h"

#include "suppress_warning.h"

namespace {

TEST(ExpTerm, transient_lambda)
{
    // @@@ sample begin 0:0

    std::vector<int> vec{1, 2, 3};

    // ラムダ式を即時実行するために () を追加
    auto const vec_act = [&vec = vec]() {
        using arg_type = std::remove_reference_t<decltype(vec)>;
        arg_type temp;
        for (auto val : vec) {
            temp.push_back(val * 2);
        }
        return temp;  // 変更後のベクターを返す
    }();

    std::vector<int> const vec_exp{2, 4, 6};

    ASSERT_EQ(vec_act, vec_exp);
    // @@@ sample end
}
}  // namespace
